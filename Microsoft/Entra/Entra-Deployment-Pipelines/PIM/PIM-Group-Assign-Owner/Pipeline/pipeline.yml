trigger:
- none

pool:
  vmImage: 'ubuntu-latest'

variables:
  - template: pipeline-variables.yml

resources:
  repositories:
    - repository: <YOUR-REPOSITORY-NAME>
      type: git
      name: '<YOUR-PROJECT-NAME>/<YOUR-REPOSITORY-NAME>'

jobs:
- job: 'AddUserToGroup'
  displayName: 'Add user(s) to a PIM group as owners, using Pipeline variables'
  steps:
  - checkout: self
    persistCredentials: true
  - task: AzureCLI@2
    inputs:
      azureSubscription: '$(serviceConnection)'
      addSpnToEnvironment: true
      scriptType: pscore
      scriptPath: '$(scriptPath)'
      scriptLocation: scriptPath
      scriptArguments: 
        -UsersJson '$(users)'
        -GroupName '$(groupName)'