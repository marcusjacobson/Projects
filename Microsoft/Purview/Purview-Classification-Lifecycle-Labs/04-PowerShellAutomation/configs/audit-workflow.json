{
  "workflowName": "Compliance Audit Preparation",
  "description": "Automated workflow to prepare for compliance audits including classification verification, label coverage analysis, and compliance reporting",
  "steps": [
    {
      "name": "Verify Classification Coverage",
      "scriptPath": "C:\\REPO\\GitHub\\Projects\\Microsoft\\Purview\\Purview-Classification-Lifecycle-Labs\\04-PowerShellAutomation\\scripts\\Invoke-BulkClassification.ps1",
      "parameters": {
        "SiteListCsv": "C:\\REPO\\GitHub\\Projects\\Microsoft\\Purview\\Purview-Classification-Lifecycle-Labs\\04-PowerShellAutomation\\configs\\audit-sites.csv",
        "MaxConcurrent": 3,
        "RetryAttempts": 2
      },
      "validationCommand": "$null -ne (Get-Content 'logs\\bulk-classification.log' -ErrorAction SilentlyContinue)",
      "continueOnFailure": false
    },
    {
      "name": "Validate Label Application",
      "scriptPath": "C:\\REPO\\GitHub\\Projects\\Microsoft\\Purview\\Purview-Classification-Lifecycle-Labs\\04-PowerShellAutomation\\scripts\\Invoke-BulkLabelApplication.ps1",
      "parameters": {
        "LabelConfigCsv": "C:\\REPO\\GitHub\\Projects\\Microsoft\\Purview\\Purview-Classification-Lifecycle-Labs\\04-PowerShellAutomation\\configs\\audit-labels.csv",
        "DryRun": true,
        "GenerateReport": true
      },
      "validationCommand": "$null -ne (Get-Content 'logs\\bulk-label-application.log' -ErrorAction SilentlyContinue)",
      "continueOnFailure": false
    },
    {
      "name": "Generate Compliance Report",
      "scriptPath": "C:\\REPO\\GitHub\\Projects\\Microsoft\\Purview\\Purview-Classification-Lifecycle-Labs\\04-PowerShellAutomation\\scripts\\Export-PurviewReport.ps1",
      "parameters": {
        "ReportType": "Compliance",
        "StartDate": "2024-12-01",
        "EndDate": "2025-01-09",
        "OutputPath": "C:\\Reports\\compliance-audit-report.html",
        "OutputFormat": "HTML"
      },
      "validationCommand": "Test-Path 'C:\\Reports\\compliance-audit-report.html'",
      "continueOnFailure": false
    },
    {
      "name": "Export Detailed Metrics (CSV)",
      "scriptPath": "C:\\REPO\\GitHub\\Projects\\Microsoft\\Purview\\Purview-Classification-Lifecycle-Labs\\04-PowerShellAutomation\\scripts\\Export-PurviewReport.ps1",
      "parameters": {
        "ReportType": "Operational",
        "StartDate": "2024-12-01",
        "EndDate": "2025-01-09",
        "OutputPath": "C:\\Reports\\compliance-metrics.csv",
        "OutputFormat": "CSV"
      },
      "validationCommand": "Test-Path 'C:\\Reports\\compliance-metrics.csv'",
      "continueOnFailure": true
    }
  ]
}
